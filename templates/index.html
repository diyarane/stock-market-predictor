<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Stock Market Predictor</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap" rel="stylesheet">
</head>
<body>
    <div class="container">
        <h1>ðŸ“Š Stock Market Predictor</h1>
        
        <!-- Suggested Companies Section -->
        <div class="suggested-section">
            <h3>ðŸ’¡ Popular Stocks to Analyze</h3>
            <div class="stock-grid">
                <button class="stock-card" onclick="predictStock('AAPL')">
                    <span class="stock-symbol">AAPL</span>
                    <span class="stock-name">Apple Inc.</span>
                </button>
                <button class="stock-card" onclick="predictStock('MSFT')">
                    <span class="stock-symbol">MSFT</span>
                    <span class="stock-name">Microsoft</span>
                </button>
                <button class="stock-card" onclick="predictStock('GOOGL')">
                    <span class="stock-symbol">GOOGL</span>
                    <span class="stock-name">Google</span>
                </button>
                <button class="stock-card" onclick="predictStock('AMZN')">
                    <span class="stock-symbol">AMZN</span>
                    <span class="stock-name">Amazon</span>
                </button>
                <button class="stock-card" onclick="predictStock('TSLA')">
                    <span class="stock-symbol">TSLA</span>
                    <span class="stock-name">Tesla</span>
                </button>
                <button class="stock-card" onclick="predictStock('META')">
                    <span class="stock-symbol">META</span>
                    <span class="stock-name">Meta (Facebook)</span>
                </button>
                <button class="stock-card" onclick="predictStock('NVDA')">
                    <span class="stock-symbol">NVDA</span>
                    <span class="stock-name">NVIDIA</span>
                </button>
                <button class="stock-card" onclick="predictStock('NFLX')">
                    <span class="stock-symbol">NFLX</span>
                    <span class="stock-name">Netflix</span>
                </button>
                <button class="stock-card" onclick="predictStock('RELIANCE.NS')">
                    <span class="stock-symbol">RELIANCE.NS</span>
                    <span class="stock-name">Reliance Industries</span>
                </button>
            </div>
        </div>

        <div class="card">
            <form method="POST" action="/" id="predictForm">
                <input type="text" name="symbol" id="symbolInput" placeholder="Enter Stock Symbol (e.g., AAPL)" required>
                <button type="submit">Predict</button>
            </form>
        </div>

        {% if prediction %}
        <div class="result-card">
            <h2>Predicted Price for {{ symbol }}: ${{ prediction }}</h2>
            
            {% if accuracy %}
            <div style="background: #f0f8ff; padding: 15px; border-radius: 10px; margin: 15px 0; border-left: 4px solid #2196F3;">
                <p style="margin: 0; font-size: 1.1rem; color: #333;">
                    <strong>Model Accuracy:</strong> 
                    {% if accuracy >= 80 %}
                    <span style="font-size: 1.3rem; font-weight: 600; color: #4CAF50;">
                        {{ accuracy }}%
                    </span>
                    {% elif accuracy >= 60 %}
                    <span style="font-size: 1.3rem; font-weight: 600; color: #FF9800;">
                        {{ accuracy }}%
                    </span>
                    {% else %}
                    <span style="font-size: 1.3rem; font-weight: 600; color: #F44336;">
                        {{ accuracy }}%
                    </span>
                    {% endif %}
                </p>
                <p style="margin: 5px 0 0 0; font-size: 0.9rem; color: #666;">
                    Based on 30-day backtesting
                </p>
            </div>
            {% endif %}
            
            <p style="color: green; font-weight: 600; font-size: 1.2rem;">{{ suggestion }}</p>
            <p style="color: #333; font-size: 1rem;">{{ reasoning }}</p>
            <img src="{{ url_for('static', filename=symbol + '_plot.png') }}" alt="Stock Plot">
        </div>
        {% endif %}

        {% if error %}
        <div class="result-card" style="background: #ffebee;">
            <p style="color: #c62828; font-weight: 600;">Error: {{ error }}</p>
        </div>
        {% endif %}
    </div>

    <script>
        function predictStock(symbol) {
            document.getElementById('symbolInput').value = symbol;
            document.getElementById('predictForm').submit();
        }
    </script>
</body>
</html>